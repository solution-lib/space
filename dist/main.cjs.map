{"version":3,"sources":["../src/app/mod/templateRegistry.ts","../src/app/mod/spaceManager.ts","../src/app/mod/jsonFormatter.ts","../src/app/mod/packageManager.ts","../src/app/mod/promptHelper.ts","../src/app/index.ts","../src/main.ts"],"names":["templateRegistry_exports","__export","TemplateRegistry","init_templateRegistry","__esmMin","type","includeUnready","templates","t","defaultTemplate","template","typeConfig","PACKAGE_JSON_KEY_ORDER","SPACE_FILE_KEY_ORDER","JsonFormatter","obj","options","indent","alignColons","sortKeys","tabWidth","keyOrder","globalMaxKeyLength","maxIndentWidth","filePath","fs","content","formatted","currentDepth","maxDepth","item","depth","value","keys","sortAlphabetically","orderedKeys","unorderedKeys","key","a","b","maxLength","traverse","keyLength","arr","currentIndent","currentIndentWidth","jsonKey","indentDiff","keyDiff","padding","SpaceManager","basePath","config","spacePath","targetPath","T","u","createdDir","error","configPath","dirPath","repoUrl","execSync","gitPath","isOrgProject","hasGithubId","githubOwner","gitUrl","homepage","issuesUrl","packageTag","tagBadge","authorUrl","keywordsJson","allFiles","hasChanges","packageJson","oldBinName","binPath","arrayOfFiles","file","fullPath","configWithDefaults","configContent","maxRetries","i","resolve","PackageManagerWrapper","packages","args","packageName","script","scriptCommand","command","loader","access","publishProc","versionMatch","stderr","proc","pkgPath","R","x","pkg","PromptHelper","params","name","description","author","input","orgRegex","simpleRegex","libReady","cliReady","serverReady","select","allTemplates","templateChoices","statusEmoji","statusText","packageManager","authorEmail","githubId","keywordsInput","keywords","k","license","spaceName","confirm","tag","shouldRemove","message","defaultValue","rl","defaultText","answer","currentPackages","packagesInput","isDev","p","dirName","nextSteps","step","index","Loader","successMessage","errorMessage","App","_App","cli","fullName","match","w","answers","org","currentDirName","C","templateInfo","kwString","installAnswers","updateAnswers","scriptName","silently","testPath","mainFile","result","spawnSync","possiblePaths","packageJsonPath","publishAnswers","app"],"mappings":"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","file":"main.cjs","sourcesContent":["// src/app/mod/templateRegistry.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { SpaceType, SpaceTypeConfig, TemplateVariant } from '../../types.d';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class TemplateRegistry {\r\n\r\n        //  INIT \r\n\r\n            private static readonly TEMPLATES: Record<SpaceType, SpaceTypeConfig> = {\r\n\r\n                lib: {\r\n                    type                    : 'lib',\r\n                    defaultTemplate         : 'clean',\r\n                    templates               : [\r\n                        {\r\n                            name            : 'clean',\r\n                            label           : 'Clean Library',\r\n                            description     : 'Zero dependencies - just TypeScript and build tools',\r\n                            repo            : 'lib-clean',\r\n                            requiresSetup   : false,\r\n                            ready           : true\r\n                        }\r\n                    ]\r\n                },\r\n\r\n                cli: {\r\n                    type                    : 'cli',\r\n                    defaultTemplate         : 'clean',\r\n                    templates               : [\r\n                        {\r\n                            name            : 'clean',\r\n                            label           : 'Clean CLI',\r\n                            description     : 'Comes with @je-es/cli library for quick CLI development',\r\n                            repo            : 'cli-clean',\r\n                            deps            : ['@je-es/cli'],\r\n                            requiresSetup   : true,\r\n                            ready           : true\r\n                        }\r\n                    ]\r\n                },\r\n\r\n                server: {\r\n                    type                    : 'server',\r\n                    defaultTemplate         : 'clean',\r\n                    templates               : [\r\n                        {\r\n                            name            : 'clean',\r\n                            label           : 'Clean Server',\r\n                            description     : 'Comes with @je-es/server library for quick server development',\r\n                            repo            : 'server-clean',\r\n                            deps            : ['@je-es/server'],\r\n                            requiresSetup   : true,\r\n                            ready           : true\r\n                        },\r\n\r\n                    ]\r\n                }\r\n\r\n            };\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Get all templates for a space type\r\n             */\r\n            static getTemplatesForType(type: SpaceType, includeUnready: boolean = false): SpaceTypeConfig['templates'] {\r\n                const templates = this.TEMPLATES[type]?.templates || [];\r\n                return includeUnready ? templates : templates.filter(t => t.ready);\r\n            }\r\n\r\n            /**\r\n             * Get only ready templates for a space type\r\n             */\r\n            static getReadyTemplatesForType(type: SpaceType): SpaceTypeConfig['templates'] {\r\n                return this.getTemplatesForType(type, false);\r\n            }\r\n\r\n            /**\r\n             * Get default template for a space type\r\n             */\r\n            static getDefaultTemplate(type: SpaceType): TemplateVariant {\r\n                const templates = this.TEMPLATES[type];\r\n                if (!templates) return 'clean';\r\n\r\n                // Try to find a ready template that matches the default\r\n                const defaultTemplate = templates.templates.find(\r\n                    t => t.name === templates.defaultTemplate && t.ready\r\n                );\r\n\r\n                if (defaultTemplate) {\r\n                    return defaultTemplate.name;\r\n                }\r\n\r\n                // Fallback to first ready template\r\n                const firstReady = templates.templates.find(t => t.ready);\r\n                return firstReady?.name || templates.defaultTemplate;\r\n            }\r\n\r\n            /**\r\n             * Get template configuration\r\n             */\r\n            static getTemplate(type: SpaceType, template: TemplateVariant) {\r\n                const typeConfig = this.TEMPLATES[type];\r\n                if (!typeConfig) return null;\r\n\r\n                return typeConfig.templates.find(t => t.name === template);\r\n            }\r\n\r\n            /**\r\n             * Check if template is ready for use\r\n             */\r\n            static isTemplateReady(type: SpaceType, template: TemplateVariant): boolean {\r\n                const config = this.getTemplate(type, template);\r\n                return config?.ready || false;\r\n            }\r\n\r\n            /**\r\n             * Validate template variant for a space type\r\n             */\r\n            static isValidTemplate(type: SpaceType, template: TemplateVariant): boolean {\r\n                const templates = this.getTemplatesForType(type);\r\n                return templates.some(t => t.name === template);\r\n            }\r\n\r\n            /**\r\n             * Get repository name for a template\r\n             */\r\n            static getRepoName(type: SpaceType, template: TemplateVariant): string {\r\n                const config = this.getTemplate(type, template);\r\n                return config?.repo || 'ready-lib';\r\n            }\r\n\r\n            /**\r\n             * Get all space types\r\n             */\r\n            static getSpaceTypes(): SpaceType[] {\r\n                return Object.keys(this.TEMPLATES) as SpaceType[];\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/spaceManager.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import * as fs                      from 'fs';\r\n    import * as path                    from 'path';\r\n    import type { SpaceConfig, TemplateVariant } from '../../types.d';\r\n    import { TemplateRegistry }         from './templateRegistry';\r\n    import { JsonFormatter, PACKAGE_JSON_KEY_ORDER, SPACE_FILE_KEY_ORDER }            from './jsonFormatter';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class SpaceManager {\r\n\r\n        //  INIT \r\n\r\n            private basePath: string;\r\n\r\n            constructor(basePath: string = process.cwd()) {\r\n                this.basePath = basePath;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            // Create a new space by cloning from template\r\n            async createSpace(config: SpaceConfig, spacePath?: string): Promise<void> {\r\n                const targetPath = spacePath || path.join(this.basePath, config.repo.name);\r\n\r\n                // Check if space already exists\r\n                if (fs.existsSync(targetPath)) {\r\n                    throw new Error(`Space path \"${targetPath}\" already exists!`);\r\n                }\r\n\r\n                let createdDir = false;\r\n\r\n                try {\r\n                    // Create directory if it doesn't exist\r\n                    if (!fs.existsSync(targetPath)) {\r\n                        fs.mkdirSync(targetPath, { recursive: true });\r\n                        createdDir = true;\r\n                    }\r\n\r\n                    // Clone template from @solution-dist\r\n                    await this.cloneTemplate(config.type, targetPath, config, config.template);\r\n\r\n                    // Create .space config file\r\n                    this.createSpaceConfig(targetPath, config);\r\n\r\n                } catch (error) {\r\n                    // Cleanup on failure - only if we created the directory\r\n                    if (createdDir && fs.existsSync(targetPath)) {\r\n                        try {\r\n                            // Try to clean up, but don't fail if we can't\r\n                            await this.safeDeleteDirectory(targetPath);\r\n                        } catch (cleanupError) {\r\n                            // Ignore cleanup errors\r\n                            console.warn(`Warning: Could not clean up directory at \"${targetPath}\"`);\r\n                        }\r\n                    }\r\n                    throw error;\r\n                }\r\n            }\r\n\r\n            // Load space configuration from .space file\r\n            loadSpaceConfig(spacePath?: string): SpaceConfig | null {\r\n                const targetPath = spacePath || this.basePath;\r\n                const configPath = path.join(targetPath, '.space');\r\n\r\n                if (!fs.existsSync(configPath)) {\r\n                    return null;\r\n                }\r\n\r\n                const content = fs.readFileSync(configPath, 'utf-8');\r\n                return JSON.parse(content);\r\n            }\r\n\r\n            // Check if current directory is a space\r\n            isSpace(dirPath?: string): boolean {\r\n                const targetPath = dirPath || this.basePath;\r\n                return fs.existsSync(path.join(targetPath, '.space'));\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            // Clone template from @solution-dist repository\r\n            private async cloneTemplate(\r\n                type: 'lib' | 'cli' | 'server',\r\n                targetPath: string,\r\n                config: SpaceConfig,\r\n                template: TemplateVariant\r\n            ): Promise<void> {\r\n                const repoName = TemplateRegistry.getRepoName(type, template);\r\n                const repoUrl = `https://github.com/solution-dist/${repoName}.git`;\r\n\r\n                try {\r\n                    const { execSync } = await import('child_process');\r\n\r\n                    // Clone silently (no output to terminal)\r\n                    execSync(\r\n                        `git clone --quiet --depth 1 ${repoUrl} \"${targetPath}\"`,\r\n                        { stdio: 'pipe' }\r\n                    );\r\n\r\n                    // Remove .git directory\r\n                    const gitPath = path.join(targetPath, '.git');\r\n                    if (fs.existsSync(gitPath)) {\r\n                        await this.safeDeleteDirectory(gitPath);\r\n                    }\r\n\r\n                    // Update files with project info\r\n                    await this.updateTemplateFiles(targetPath, config);\r\n\r\n                } catch (error: any) {\r\n                    // Check if it's a \"repository not found\" error\r\n                    if (error.message && error.message.includes('Repository not found')) {\r\n                        throw new Error(\r\n                            `Template repository not found: ${repoUrl}\\n` +\r\n                            `This template is not yet available. Please mark it as ready: false in templateRegistry.ts`\r\n                        );\r\n                    }\r\n\r\n                    throw new Error(`Failed to clone template from ${repoUrl}: ${error.message || error}`);\r\n                }\r\n            }\r\n\r\n            // Update template files with project-specific information\r\n            private async updateTemplateFiles(\r\n                spacePath: string,\r\n                config: SpaceConfig\r\n            ): Promise<void> {\r\n\r\n                // Generate context-aware URLs and values\r\n                const isOrgProject = config.repo.org && config.repo.org.trim() !== '';\r\n                const hasGithubId = config.author.id && config.author.id.trim() !== '';\r\n\r\n                // Determine the GitHub owner (org or personal account)\r\n                const githubOwner = isOrgProject ? config.repo.org : (hasGithubId ? config.author.id : '');\r\n\r\n                // Generate URLs based on context\r\n                const gitUrl = githubOwner\r\n                    ? `git+https://github.com/${githubOwner}/${config.repo.name}.git`\r\n                    : '';\r\n\r\n                const homepage = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}#readme`\r\n                    : '';\r\n\r\n                const issuesUrl = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}/issues`\r\n                    : '';\r\n\r\n                // Prepare full package name (tag)\r\n                const packageTag = isOrgProject\r\n                    ? `@${config.repo.org}/${config.repo.name}`\r\n                    : config.repo.name;\r\n\r\n                // Prepare tag badge - format for shields.io badge\r\n                let tagBadge = '-';\r\n                if (isOrgProject) {\r\n                    tagBadge += `@${(config.repo.org.replace(/-/g, '--') + '/' + config.repo.name.replace(/-/g, '--')).replace(/ /g, '_')}`;\r\n                } else if (config.author.name) {\r\n                    tagBadge += (config.author.name.replace(/-/g, '--') + '/' + config.repo.name.replace(/-/g, '--')).replace(/ /g, '_');\r\n                } else {\r\n                    tagBadge += (config.repo.name.replace(/-/g, '--')).replace(/ /g, '_');\r\n                }\r\n\r\n                // Prepare author URL\r\n                const authorUrl = hasGithubId\r\n                    ? `https://github.com/${config.author.id}`\r\n                    : (config.author.url || '');\r\n\r\n                // Prepare keywords as JSON array string\r\n                const keywordsJson = config.repo.kw && config.repo.kw.length > 0\r\n                    ? JSON.stringify(config.repo.kw)\r\n                    : '[]';\r\n\r\n                // Recursively find all files\r\n                const allFiles = this.getAllFiles(spacePath);\r\n\r\n                for (const filePath of allFiles) {\r\n                    // Skip node_modules and .git\r\n                    if (filePath.includes('node_modules') || filePath.includes('.git')) {\r\n                        continue;\r\n                    }\r\n\r\n                    try {\r\n                        let content = fs.readFileSync(filePath, 'utf-8');\r\n                        let hasChanges = false;\r\n\r\n                        // STEP 1: Replace template variables in the raw content first\r\n                        if (content.includes('{{')) {\r\n                            hasChanges = true;\r\n\r\n                            // Replace all placeholders\r\n                            content = content\r\n                                // Package tag (full name with org if exists)\r\n                                .replace(/\\{\\{tag\\}\\}/g,            packageTag)\r\n                                .replace(/\\{\\{tag-badge\\}\\}/g,      tagBadge)\r\n\r\n                                // Repo info\r\n                                .replace(/\\{\\{name\\}\\}/g,           config.repo.name)\r\n                                .replace(/\\{\\{repo\\}\\}/g,           config.repo.name)\r\n                                .replace(/\\{\\{org\\}\\}/g,            config.repo.org || '')\r\n                                .replace(/\\{\\{desc\\}\\}/g,           config.repo.desc || `A ${config.type} space`)\r\n                                .replace(/\\{\\{description\\}\\}/g,    config.repo.desc || `A ${config.type} space`)\r\n                                .replace(/\\{\\{version\\}\\}/g,        config.repo.version)\r\n                                .replace(/\\{\\{license\\}\\}/g,        config.repo.license || 'MIT')\r\n                                .replace(/\\{\\{kw\\}\\}/g,             keywordsJson)\r\n                                .replace(/\\{\\{keywords\\}\\}/g,       keywordsJson)\r\n\r\n                                // URLs\r\n                                .replace(/\\{\\{url\\}\\}/g,            gitUrl)\r\n                                .replace(/\\{\\{repo_url\\}\\}/g,       gitUrl)\r\n                                .replace(/\\{\\{git_url\\}\\}/g,        gitUrl)\r\n                                .replace(/\\{\\{homepage\\}\\}/g,       homepage)\r\n                                .replace(/\\{\\{issues\\}\\}/g,         issuesUrl)\r\n\r\n                                // Space type, template, and PM\r\n                                .replace(/\\{\\{type\\}\\}/g,           config.type)\r\n                                .replace(/\\{\\{template\\}\\}/g,       config.template || 'clean')\r\n                                .replace(/\\{\\{pm\\}\\}/g,             config.pm)\r\n\r\n                                // Author info\r\n                                .replace(/\\{\\{author\\}\\}/g,         config.author.name || '')\r\n                                .replace(/\\{\\{author_name\\}\\}/g,    config.author.name || '')\r\n                                .replace(/\\{\\{author_id\\}\\}/g,      config.author.id || '')\r\n                                .replace(/\\{\\{author_email\\}\\}/g,   config.author.email || '')\r\n                                .replace(/\\{\\{author_url\\}\\}/g,     authorUrl);\r\n\r\n                            // Write the updated content\r\n                            fs.writeFileSync(filePath, content, 'utf-8');\r\n                        }\r\n\r\n                        // Special handling for package.json FIRST\r\n                        if (filePath.endsWith('package.json')) {\r\n                            // STEP 2: Parse and further update the JSON\r\n                            const packageJson = JSON.parse(content);\r\n\r\n                            // Set full package name (with org if exists)\r\n                            packageJson.name = packageTag;\r\n                            packageJson.version = config.repo.version;\r\n                            packageJson.description = config.repo.desc || `A ${config.type} space`;\r\n                            packageJson.license = config.repo.license || 'MIT';\r\n\r\n                            // Set keywords as array\r\n                            if (config.repo.kw && config.repo.kw.length > 0) {\r\n                                packageJson.keywords = config.repo.kw;\r\n                            } else {\r\n                                packageJson.keywords = [];\r\n                            }\r\n\r\n                            // Set homepage\r\n                            if (homepage) {\r\n                                packageJson.homepage = homepage;\r\n                            }\r\n\r\n                            // Set bugs/issues URL\r\n                            if (issuesUrl) {\r\n                                if (!packageJson.bugs) {\r\n                                    packageJson.bugs = {};\r\n                                }\r\n                                packageJson.bugs.url = issuesUrl;\r\n                            }\r\n\r\n                            // Set author\r\n                            if (config.author.name) {\r\n                                if (config.author.email) {\r\n                                    packageJson.author = {\r\n                                        name: config.author.name,\r\n                                        email: config.author.email,\r\n                                        url: authorUrl || undefined\r\n                                    };\r\n                                } else {\r\n                                    packageJson.author = {\r\n                                        name: config.author.name,\r\n                                        url: authorUrl || undefined\r\n                                    };\r\n                                }\r\n                            }\r\n\r\n                            // Set repository URL\r\n                            if (gitUrl) {\r\n                                packageJson.repository = {\r\n                                    type: 'git',\r\n                                    url: gitUrl\r\n                                };\r\n                            }\r\n\r\n                            // Update bin name for CLI projects\r\n                            if (config.type === 'cli' && packageJson.bin) {\r\n                                const oldBinName = Object.keys(packageJson.bin)[0];\r\n                                const binPath = packageJson.bin[oldBinName];\r\n                                delete packageJson.bin[oldBinName];\r\n                                packageJson.bin[config.repo.name] = binPath;\r\n                            }\r\n\r\n                            // Ensure bun engine exists\r\n                            if (!packageJson.engines) {\r\n                                packageJson.engines = {};\r\n                            }\r\n                            if (!packageJson.engines.bun) {\r\n                                packageJson.engines.bun = '>=1.0.0';\r\n                            }\r\n\r\n                            // STEP 3: Format and write package.json\r\n                            content = JsonFormatter.format(packageJson, { keyOrder: PACKAGE_JSON_KEY_ORDER });\r\n                            fs.writeFileSync(filePath, content + '\\n', 'utf-8');\r\n                            continue; // Skip the rest of the loop for package.json\r\n                        }\r\n\r\n                    } catch (error) {\r\n                        // Silently skip files that can't be read/updated (like binaries)\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Recursively get all files in a directory\r\n            private getAllFiles(dirPath: string, arrayOfFiles: string[] = []): string[] {\r\n                const files = fs.readdirSync(dirPath);\r\n\r\n                files.forEach((file) => {\r\n                    const fullPath = path.join(dirPath, file);\r\n\r\n                    if (fs.statSync(fullPath).isDirectory()) {\r\n                        arrayOfFiles = this.getAllFiles(fullPath, arrayOfFiles);\r\n                    } else {\r\n                        arrayOfFiles.push(fullPath);\r\n                    }\r\n                });\r\n\r\n                return arrayOfFiles;\r\n            }\r\n\r\n            // Create .space configuration file\r\n            private createSpaceConfig(spacePath: string, config: SpaceConfig): void {\r\n                const configPath = path.join(spacePath, '.space');\r\n\r\n                // Generate URLs for .space file\r\n                const isOrgProject = config.repo.org && config.repo.org.trim() !== '';\r\n                const hasGithubId = config.author.id && config.author.id.trim() !== '';\r\n                const githubOwner = isOrgProject ? config.repo.org : (hasGithubId ? config.author.id : '');\r\n\r\n                const gitUrl = githubOwner\r\n                    ? `git+https://github.com/${githubOwner}/${config.repo.name}.git`\r\n                    : '';\r\n\r\n                const homepage = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}#readme`\r\n                    : '';\r\n\r\n                const issuesUrl = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}/issues`\r\n                    : '';\r\n\r\n                const authorUrl = hasGithubId\r\n                    ? `https://github.com/${config.author.id}`\r\n                    : (config.author.url || '');\r\n\r\n                const configWithDefaults = {\r\n                    type: config.type,\r\n                    template: config.template || 'clean',\r\n                    pm: config.pm,\r\n                    repo: {\r\n                        org: config.repo.org || '',\r\n                        name: config.repo.name,\r\n                        version: config.repo.version,\r\n                        desc: config.repo.desc || `A ${config.type} space`,\r\n                        kw: config.repo.kw || [],\r\n                        license: config.repo.license || 'MIT',\r\n                        issues: issuesUrl,\r\n                        homepage: homepage,\r\n                        git_url: gitUrl\r\n                    },\r\n                    author: {\r\n                        id: config.author.id || '',\r\n                        name: config.author.name || '',\r\n                        email: config.author.email || '',\r\n                        url: authorUrl\r\n                    },\r\n                    createdAt: new Date().toISOString()\r\n                };\r\n\r\n                const configContent = JsonFormatter.format(configWithDefaults, { keyOrder: SPACE_FILE_KEY_ORDER });\r\n\r\n                fs.writeFileSync(configPath, configContent + '\\n', 'utf-8');\r\n            }\r\n\r\n            // Safely delete directory with retry logic\r\n            private async safeDeleteDirectory(dirPath: string, maxRetries: number = 3): Promise<void> {\r\n                for (let i = 0; i < maxRetries; i++) {\r\n                    try {\r\n                        fs.rmSync(dirPath, {\r\n                            recursive: true,\r\n                            force: true,\r\n                            maxRetries: 3,\r\n                            retryDelay: 100\r\n                        });\r\n\r\n                        // Verify deletion\r\n                        if (!fs.existsSync(dirPath)) {\r\n                            return;\r\n                        }\r\n                    } catch (error) {\r\n                        if (i === maxRetries - 1) {\r\n                            throw error;\r\n                        }\r\n                        // Wait before retry\r\n                        await new Promise(resolve => setTimeout(resolve, 300 * (i + 1)));\r\n                    }\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/jsonFormatter.ts\r\n//\r\n// Developed with  by Maysara.\r\n// JSON formatter with tab indentation and aligned colons\r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export interface FormatOptions {\r\n        indent?         : string;   // default: '\\t'\r\n        alignColons?    : boolean;  // default: true\r\n        sortKeys?       : boolean;  // default: false\r\n        tabWidth?       : number;   // default: 4 (visual width of a tab character)\r\n        keyOrder?       : string[]; // custom key order (keys not in list appear at end)\r\n    }\r\n\r\n    export const PACKAGE_JSON_KEY_ORDER = [\r\n        'name',\r\n        'version',\r\n        'description',\r\n        'keywords',\r\n        'license',\r\n        'homepage',        // NEW\r\n        'bugs',            // NEW\r\n        'author',\r\n        'repository',\r\n        'type',\r\n        'main',\r\n        'types',\r\n        'bin',\r\n        'files',\r\n        'exports',\r\n        'scripts',\r\n        'engines',\r\n        'peerDependencies',\r\n        'dependencies',\r\n        'devDependencies'\r\n    ];\r\n\r\n    export const SPACE_FILE_KEY_ORDER = [\r\n        'type',\r\n        'template',\r\n        'pm',\r\n        'repo',\r\n        'author',\r\n        'createdAt'\r\n    ];\r\n\r\n    // For nested objects in repo\r\n    export const REPO_KEY_ORDER = [\r\n        'org',\r\n        'name',\r\n        'version',\r\n        'desc',\r\n        'kw',\r\n        'license',\r\n        'issues',      // NEW\r\n        'homepage',    // NEW\r\n        'git_url'      // NEW\r\n    ];\r\n\r\n    // For nested objects in author\r\n    export const AUTHOR_KEY_ORDER = [\r\n        'id',\r\n        'name',\r\n        'email',\r\n        'url'\r\n    ];\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class JsonFormatter {\r\n\r\n        //  MAIN \r\n\r\n            // Format JSON with custom alignment and indentation\r\n            static format(obj: any, options: FormatOptions = {}): string {\r\n                const indent = options.indent || '\\t';\r\n                const alignColons = options.alignColons !== false;\r\n                const sortKeys = options.sortKeys || false;\r\n                const tabWidth = options.tabWidth || 4;\r\n                const keyOrder = options.keyOrder || [];\r\n\r\n                // Calculate GLOBAL max key length across all nesting levels\r\n                const globalMaxKeyLength = alignColons ? this.calculateGlobalMaxKeyLength(obj) : 0;\r\n\r\n                // Calculate max indent depth (in visual characters)\r\n                const maxDepth = this.calculateMaxDepth(obj);\r\n                const maxIndentWidth = maxDepth * (indent === '\\t' ? tabWidth : indent.length);\r\n\r\n                return this.formatValue(obj, 0, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n            }\r\n\r\n            // Format and write to file\r\n            static formatFile(filePath: string, options: FormatOptions = {}): void {\r\n                const fs = require('fs');\r\n                const content = fs.readFileSync(filePath, 'utf-8');\r\n                const obj = JSON.parse(content);\r\n                const formatted = this.format(obj, options);\r\n                fs.writeFileSync(filePath, formatted + '\\n', 'utf-8');\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            // Calculate the maximum nesting depth\r\n            private static calculateMaxDepth(obj: any, currentDepth: number = 0): number {\r\n                if (!obj || typeof obj !== 'object') {\r\n                    return currentDepth;\r\n                }\r\n\r\n                let maxDepth = currentDepth;\r\n\r\n                if (Array.isArray(obj)) {\r\n                    obj.forEach(item => {\r\n                        const depth = this.calculateMaxDepth(item, currentDepth + 1);\r\n                        if (depth > maxDepth) maxDepth = depth;\r\n                    });\r\n                } else {\r\n                    Object.values(obj).forEach(value => {\r\n                        const depth = this.calculateMaxDepth(value, currentDepth + 1);\r\n                        if (depth > maxDepth) maxDepth = depth;\r\n                    });\r\n                }\r\n\r\n                return maxDepth;\r\n            }\r\n\r\n            // Sort keys based on custom order or alphabetically\r\n            private static sortKeys(keys: string[], keyOrder: string[], sortAlphabetically: boolean): string[] {\r\n                if (keyOrder.length === 0) {\r\n                    return sortAlphabetically ? keys.sort() : keys;\r\n                }\r\n\r\n                // Separate keys into ordered and unordered\r\n                const orderedKeys: string[] = [];\r\n                const unorderedKeys: string[] = [];\r\n\r\n                keys.forEach(key => {\r\n                    if (keyOrder.includes(key)) {\r\n                        orderedKeys.push(key);\r\n                    } else {\r\n                        unorderedKeys.push(key);\r\n                    }\r\n                });\r\n\r\n                // Sort ordered keys by their position in keyOrder\r\n                orderedKeys.sort((a, b) => keyOrder.indexOf(a) - keyOrder.indexOf(b));\r\n\r\n                // Sort unordered keys alphabetically if sortKeys is true\r\n                if (sortAlphabetically) {\r\n                    unorderedKeys.sort();\r\n                }\r\n\r\n                // Return ordered keys first, then unordered\r\n                return [...orderedKeys, ...unorderedKeys];\r\n            }\r\n            private static calculateGlobalMaxKeyLength(obj: any): number {\r\n                let maxLength = 0;\r\n\r\n                const traverse = (value: any) => {\r\n                    if (!value || typeof value !== 'object') {\r\n                        return;\r\n                    }\r\n\r\n                    if (Array.isArray(value)) {\r\n                        value.forEach(item => traverse(item));\r\n                        return;\r\n                    }\r\n\r\n                    // It's an object\r\n                    const keys = Object.keys(value);\r\n                    keys.forEach(key => {\r\n                        const keyLength = JSON.stringify(key).length;\r\n                        if (keyLength > maxLength) {\r\n                            maxLength = keyLength;\r\n                        }\r\n                        traverse(value[key]);\r\n                    });\r\n                };\r\n\r\n                traverse(obj);\r\n                return maxLength;\r\n            }\r\n\r\n            // Format any JSON value recursively\r\n            private static formatValue(\r\n                value: any,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (value === null) return 'null';\r\n                if (value === undefined) return 'undefined';\r\n\r\n                const type = typeof value;\r\n\r\n                if (type === 'string') {\r\n                    return JSON.stringify(value);\r\n                }\r\n\r\n                if (type === 'number' || type === 'boolean') {\r\n                    return String(value);\r\n                }\r\n\r\n                if (Array.isArray(value)) {\r\n                    return this.formatArray(value, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n                }\r\n\r\n                if (type === 'object') {\r\n                    return this.formatObject(value, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n                }\r\n\r\n                return JSON.stringify(value);\r\n            }\r\n\r\n            // Format an array\r\n            private static formatArray(\r\n                arr: any[],\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (arr.length === 0) return '[]';\r\n\r\n                // Check if array is simple (primitives only)\r\n                const isSimple = arr.every(item =>\r\n                    typeof item === 'string' ||\r\n                    typeof item === 'number' ||\r\n                    typeof item === 'boolean' ||\r\n                    item === null\r\n                );\r\n\r\n                if (isSimple && arr.length <= 3) {\r\n                    // Inline simple short arrays\r\n                    return '[' + arr.map(item => this.formatValue(item, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder)).join(', ') + ']';\r\n                }\r\n\r\n                // Multi-line array\r\n                const currentIndent = indent.repeat(depth + 1);\r\n                const items = arr.map(item =>\r\n                    currentIndent + this.formatValue(item, depth + 1, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder)\r\n                );\r\n\r\n                return '[\\n' + items.join(',\\n') + '\\n' + indent.repeat(depth) + ']';\r\n            }\r\n\r\n            // Format an object with GLOBAL alignment accounting for indentation\r\n            private static formatObject(\r\n                obj: any,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (Object.keys(obj).length === 0) return '{}';\r\n\r\n                let keys = Object.keys(obj);\r\n\r\n                // Apply custom ordering\r\n                keys = this.sortKeys(keys, keyOrder, sortKeys);\r\n\r\n                const currentIndent = indent.repeat(depth + 1);\r\n\r\n                // Calculate visual width of current indentation\r\n                const currentIndentWidth = (depth + 1) * (indent === '\\t' ? tabWidth : indent.length);\r\n\r\n                // Format each key-value pair\r\n                const lines = keys.map(key => {\r\n                    const jsonKey = JSON.stringify(key);\r\n                    const value = this.formatValue(obj[key], depth + 1, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n\r\n                    if (alignColons) {\r\n                        // Padding = (max indent width - current indent width) + (max key length - current key length)\r\n                        const indentDiff = maxIndentWidth - currentIndentWidth;\r\n                        const keyDiff = globalMaxKeyLength - jsonKey.length;\r\n                        const padding = ' '.repeat(indentDiff + keyDiff);\r\n                        return `${currentIndent}${jsonKey}${padding} : ${value}`;\r\n                    } else {\r\n                        return `${currentIndent}${jsonKey} : ${value}`;\r\n                    }\r\n                });\r\n\r\n                return '{\\n' + lines.join(',\\n') + '\\n' + indent.repeat(depth) + '}';\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/packageManager.ts\r\n//\r\n// Developed with  by Maysara.\r\n// Simplified: Uses Bun for all operations, npm only for publishing\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { JsonFormatter, PACKAGE_JSON_KEY_ORDER } from './jsonFormatter';\r\n    import * as path from 'path';\r\n    import * as fs from 'fs';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class PackageManagerWrapper {\r\n\r\n        //  INIT \r\n\r\n            // Always use bun\r\n            private readonly pm = 'bun';\r\n\r\n            // Default scripts\r\n            private readonly DEFAULT_SCRIPTS = {\r\n                build: 'tsup',\r\n                test: 'test',\r\n            };\r\n\r\n            constructor() {\r\n                // No need for pm parameter anymore\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            // Install packages\r\n            install(packages?: string[], options?: { dev?: boolean; global?: boolean }): void {\r\n                const args: string[] = [];\r\n\r\n                // Handle global installations differently\r\n                if (options?.global) {\r\n                    args.push('install', '--global');\r\n\r\n                    if (packages && packages.length > 0) {\r\n                        args.push(...packages);\r\n                    } else {\r\n                        console.error(' Please specify packages to install globally');\r\n                        process.exit(1);\r\n                    }\r\n                } else {\r\n                    args.push('install');\r\n\r\n                    if (packages && packages.length > 0) {\r\n                        args.push(...packages);\r\n                    }\r\n\r\n                    if (options?.dev) {\r\n                        args.push('--dev');\r\n                    }\r\n                }\r\n\r\n                console.log(` Installing${packages ? ` ${packages.join(', ')}` : ' dependencies'}${options?.global ? ' globally' : ''}...`);\r\n                this.execute(args);\r\n\r\n                // Format package.json after install (only for local installs)\r\n                if (!options?.global) {\r\n                    this.format();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Remove packages\r\n             */\r\n            remove(packages: string[], options?: { global?: boolean }): void {\r\n                const args = ['remove'];\r\n\r\n                if (options?.global) {\r\n                    args.push('--global');\r\n                }\r\n\r\n                args.push(...packages);\r\n\r\n                console.log(` Removing ${packages.join(', ')}${options?.global ? ' globally' : ''}...`);\r\n                this.execute(args);\r\n\r\n                // Format package.json after remove (only for local removes)\r\n                if (!options?.global) {\r\n                    this.format();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Link package globally or link global package to current project\r\n             * - No args: Links current package globally (bun link)\r\n             * - With package name: Links global package to current project (bun link <package>)\r\n             */\r\n            link(packageName?: string): void {\r\n                if (packageName) {\r\n                    console.log(` Linking global package \"${packageName}\" to current project...`);\r\n                    this.execute(['link', packageName]);\r\n                } else {\r\n                    console.log(' Linking current package globally...');\r\n                    this.execute(['link']);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Unlink package globally or unlink global package from current project\r\n             * - No args: Unlinks current package globally (bun unlink)\r\n             * - With package name: Unlinks global package from current project (bun unlink <package>)\r\n             */\r\n            unlink(packageName?: string): void {\r\n                if (packageName) {\r\n                    console.log(` Unlinking global package \"${packageName}\" from current project...`);\r\n                    this.execute(['unlink', packageName]);\r\n                } else {\r\n                    console.log(' Unlinking current package globally...');\r\n                    this.execute(['unlink']);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run a script from package.json (with fallback to default)\r\n             */\r\n            run(script: string, args?: string[]): void {\r\n                const scriptCommand = this.getScriptCommand(script);\r\n\r\n                if (!scriptCommand) {\r\n                    console.error(` Script \"${script}\" not found in package.json and no default available`);\r\n                    process.exit(1);\r\n                }\r\n\r\n                // If using default script, run it directly\r\n                if (this.isUsingDefaultScript(script)) {\r\n                    const commandParts = scriptCommand.split(' ');\r\n                    const command = [...commandParts];\r\n\r\n                    if (args && args.length > 0) {\r\n                        command.push(...args);\r\n                    }\r\n\r\n                    this.execute(command);\r\n                } else {\r\n                    // Use bun run for package.json scripts\r\n                    const command = ['run', script];\r\n                    if (args && args.length > 0) {\r\n                        command.push('--', ...args);\r\n                    }\r\n                    this.execute(command);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run a script from package.json silently (with fallback to default)\r\n             */\r\n            runSilent(script: string, args?: string[]): void {\r\n                const scriptCommand = this.getScriptCommand(script);\r\n\r\n                if (!scriptCommand) {\r\n                    throw new Error(`Script \"${script}\" not found in package.json and no default available`);\r\n                }\r\n\r\n                // If using default script, run it directly\r\n                if (this.isUsingDefaultScript(script)) {\r\n                    const commandParts = scriptCommand.split(' ');\r\n                    const command = [...commandParts];\r\n\r\n                    if (args && args.length > 0) {\r\n                        command.push(...args);\r\n                    }\r\n\r\n                    this.executeSilent(command);\r\n                } else {\r\n                    // Use bun run for package.json scripts\r\n                    const command = ['run', script];\r\n                    if (args && args.length > 0) {\r\n                        command.push('--', ...args);\r\n                    }\r\n                    this.executeSilent(command);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Update packages\r\n             */\r\n            update(packages?: string[]): void {\r\n                console.log(` Updating${packages ? ` ${packages.join(', ')}` : ' all packages'}...`);\r\n\r\n                const args = ['update'];\r\n                if (packages && packages.length > 0) {\r\n                    args.push(...packages);\r\n                }\r\n                this.execute(args);\r\n\r\n                // Format package.json after update\r\n                this.format();\r\n            }\r\n\r\n            /**\r\n             * List installed packages\r\n             */\r\n            list(options?: { global?: boolean }): void {\r\n                const args = ['pm', 'ls'];\r\n                if (options?.global) {\r\n                    args.push('--global');\r\n                }\r\n                this.execute(args);\r\n            }\r\n\r\n            /**\r\n             * Initialize a new package.json\r\n             */\r\n            init(): void {\r\n                console.log(' Initializing package.json...');\r\n                this.execute(['init', '-y']);\r\n\r\n                // Format package.json after init\r\n                this.format();\r\n            }\r\n\r\n            /**\r\n             * Publish package (uses bun for publishing - simpler and more reliable)\r\n             */\r\n            publish(options?: { tag?: string; access?: 'public' | 'restricted' }, loader?: any): void {\r\n                // Publish with bun (more reliable than npm)\r\n                const args = ['publish'];\r\n                if (options?.tag) {\r\n                    args.push('--tag', options.tag);\r\n                }\r\n                // Always set access flag for scoped packages, default to public\r\n                const access = options?.access || 'public';\r\n                args.push('--access', access);\r\n\r\n                const publishProc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'pipe',\r\n                    stderr: 'pipe'\r\n                });\r\n\r\n                if (publishProc.exitCode === 0) {\r\n                    // Extract package name and version from output\r\n                    const stdout = new TextDecoder().decode(publishProc.stdout);\r\n                    const versionMatch = stdout.match(/\\+ (.+@[\\d.]+)/);\r\n\r\n                    if (loader) {\r\n                        if (versionMatch) {\r\n                            loader.stop(` Published ${versionMatch[1]} successfully!`);\r\n                        } else {\r\n                            loader.stop(' Published successfully!');\r\n                        }\r\n                    } else {\r\n                        if (versionMatch) {\r\n                            console.log(` Published ${versionMatch[1]} successfully!`);\r\n                        } else {\r\n                            console.log(' Published successfully!');\r\n                        }\r\n                    }\r\n                } else {\r\n                    const stderr = new TextDecoder().decode(publishProc.stderr);\r\n                    if (loader) {\r\n                        loader.stopWithError('Publish failed!');\r\n                    } else {\r\n                        console.error('Publish failed!');\r\n                    }\r\n                    if (stderr) {\r\n                        console.error(stderr);\r\n                    }\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Execute bun command\r\n             */\r\n            execute(args: string[]): void {\r\n                const proc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'inherit',\r\n                    stderr: 'inherit'\r\n                });\r\n\r\n                if (proc.exitCode !== 0) {\r\n                    console.error(` Command failed: bun ${args.join(' ')}`);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Execute bun command silently\r\n             */\r\n            executeSilent(args: string[]): void {\r\n                const proc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'pipe',\r\n                    stderr: 'pipe'\r\n                });\r\n\r\n                if (proc.exitCode !== 0) {\r\n                    // Only show errors if command failed\r\n                    const stderr = new TextDecoder().decode(proc.stderr);\r\n                    console.error(` Command failed: bun ${args.join(' ')}`);\r\n                    if (stderr) {\r\n                        console.error(stderr);\r\n                    }\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get package manager name\r\n             */\r\n            getName(): string {\r\n                return 'bun';\r\n            }\r\n\r\n            /**\r\n             * Get package manager emoji\r\n             */\r\n            getEmoji(): string {\r\n                return '';\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            /**\r\n             * Format package.json after operations\r\n             */\r\n            private format(): void {\r\n                try {\r\n                    const pkgPath = path.join(process.cwd(), 'package.json');\r\n                    if (fs.existsSync(pkgPath)) {\r\n                        JsonFormatter.formatFile(pkgPath, { keyOrder: PACKAGE_JSON_KEY_ORDER });\r\n                    }\r\n                } catch (error) {\r\n                    // Silently ignore formatting errors\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get script command (from package.json or default)\r\n             */\r\n            private getScriptCommand(script: string): string | null {\r\n                const pkgPath = path.join(process.cwd(), 'package.json');\r\n\r\n                // Try to read package.json\r\n                if (fs.existsSync(pkgPath)) {\r\n                    try {\r\n                        const pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf-8'));\r\n\r\n                        // Check if script exists in package.json\r\n                        if (pkg.scripts && pkg.scripts[script]) {\r\n                            return pkg.scripts[script];\r\n                        }\r\n                    } catch (error) {\r\n                        // If can't read package.json, fall through to defaults\r\n                    }\r\n                }\r\n\r\n                // Return default script if available\r\n                if (script in this.DEFAULT_SCRIPTS) {\r\n                    return this.DEFAULT_SCRIPTS[script as keyof typeof this.DEFAULT_SCRIPTS];\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Check if using default script (not from package.json)\r\n             */\r\n            private isUsingDefaultScript(script: string): boolean {\r\n                const pkgPath = path.join(process.cwd(), 'package.json');\r\n\r\n                if (fs.existsSync(pkgPath)) {\r\n                    try {\r\n                        const pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf-8'));\r\n\r\n                        // If script exists in package.json, not using default\r\n                        if (pkg.scripts && pkg.scripts[script]) {\r\n                            return false;\r\n                        }\r\n                    } catch (error) {\r\n                        // If can't read, assume using default\r\n                    }\r\n                }\r\n\r\n                // Using default if script is in DEFAULT_SCRIPTS\r\n                return script in this.DEFAULT_SCRIPTS;\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/promptHelper.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { input, select, confirm } from '@inquirer/prompts';\r\n    import { TemplateRegistry } from './templateRegistry';\r\n    import type { SpaceType, TemplateVariant } from '../../types.d';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export interface InitPromptAnswers {\r\n        name            : string;\r\n        type            : 'lib' | 'cli' | 'server';\r\n        template        : string;\r\n        description     : string;\r\n        packageManager  : 'bun' | 'npm';\r\n        author          : string;\r\n        authorEmail     : string;\r\n        githubId        : string;\r\n        keywords        : string[];\r\n        license         : string;\r\n    }\r\n\r\n    export interface PublishPromptAnswers {\r\n        confirm         : boolean;\r\n        tag?            : string;\r\n        access?         : 'public' | 'restricted';\r\n    }\r\n\r\n    export interface RemovePromptAnswers {\r\n        packages        : string[];\r\n        confirm         : boolean;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class PromptHelper {\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Prompt for init command parameters\r\n             */\r\n            static async promptInit(params: {\r\n                name?       : string;\r\n                org?        : string;\r\n                type?       : string;\r\n                template?   : string;\r\n                desc?       : string;\r\n            }): Promise<InitPromptAnswers> {\r\n\r\n                let name                = params.name;\r\n                let type                = params.type;\r\n                let template            = params.template;\r\n                let description         = params.desc;\r\n                let author              = '';\r\n\r\n                // Name (supports @org/name format)\r\n                if (!name || name === 'my-space') {\r\n                    name = await input({\r\n                        message: 'name:',\r\n                        default: 'my-space',\r\n                        validate: (value: string) => {\r\n                            if (!value || value.trim() === '') {\r\n                                return 'Space name is required';\r\n                            }\r\n                            // Check for @org/name format\r\n                            const orgRegex = /^@([a-z0-9-_]+)\\/([a-z0-9-_]+)$/;\r\n                            const simpleRegex = /^[a-z0-9-_]+$/;\r\n\r\n                            if (!orgRegex.test(value) && !simpleRegex.test(value)) {\r\n                                return 'Name must be either \"package-name\" or \"@org/package-name\" (lowercase, numbers, hyphens, underscores only)';\r\n                            }\r\n                            return true;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Type\r\n                if (!type) {\r\n                    // Check which space types have ready templates\r\n                    const libReady = TemplateRegistry.getTemplatesForType('lib', false).length > 0;\r\n                    const cliReady = TemplateRegistry.getTemplatesForType('cli', false).length > 0;\r\n                    const serverReady = TemplateRegistry.getTemplatesForType('server', false).length > 0;\r\n\r\n                    type = await select({\r\n                        message: 'type:',\r\n                        choices: [\r\n                            {\r\n                                name: ` Library    - TypeScript library for npm${!libReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'lib',\r\n                                disabled: !libReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: ` CLI        - Command-line tool${!cliReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'cli',\r\n                                disabled: !cliReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: ` Server     - Backend server application${!serverReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'server',\r\n                                disabled: !serverReady ? 'No templates ready yet' : false\r\n                            }\r\n                        ]\r\n                    });\r\n                }\r\n\r\n                // Template Variant (based on type) - show all templates with status\r\n                if (!template) {\r\n                    const allTemplates = TemplateRegistry.getTemplatesForType(type as SpaceType, true);\r\n                    const readyTemplates = allTemplates.filter(t => t.ready);\r\n\r\n                    // Check if there are any ready templates\r\n                    if (readyTemplates.length === 0) {\r\n                        throw new Error(`No templates are ready yet for \"${type}\" spaces. This space type is coming soon!`);\r\n                    }\r\n\r\n                    const templateChoices = allTemplates.map(t => {\r\n                        const statusEmoji = t.ready ? '' : '';\r\n                        const statusText = t.ready ? '' : ' (Coming Soon)';\r\n                        return {\r\n                            name: `${statusEmoji} ${t.label}${statusText} - ${t.description}`,\r\n                            value: t.name,\r\n                            short: t.label,\r\n                            disabled: !t.ready ? 'Not ready yet' : false\r\n                        };\r\n                    });\r\n\r\n                    template = await select({\r\n                        message: 'template:',\r\n                        choices: templateChoices,\r\n                        default: TemplateRegistry.getDefaultTemplate(type as SpaceType)\r\n                    });\r\n                }\r\n\r\n                // Description\r\n                if (!description) {\r\n                    const defaultDesc = type === 'lib'\r\n                        ? `A TypeScript library`\r\n                        : type === 'cli'\r\n                            ? `A command-line tool`\r\n                            : `A backend server`;\r\n\r\n                    description = await input({\r\n                        message: 'desc:',\r\n                        default: defaultDesc\r\n                    });\r\n                }\r\n\r\n                // Package Manager - Always use bun (removed from prompt)\r\n                const packageManager = 'bun';\r\n\r\n                // Author name\r\n                author = await input({\r\n                    message: 'author name:',\r\n                    default: ''\r\n                });\r\n\r\n                // Author email\r\n                const authorEmail = await input({\r\n                    message: 'author email:',\r\n                    default: '',\r\n                    validate: (value: string) => {\r\n                        if (value && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\r\n                            return 'Please enter a valid email address or leave empty';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                // GitHub username\r\n                const githubId = await input({\r\n                    message: 'github username:',\r\n                    default: '',\r\n                    validate: (value: string) => {\r\n                        if (value && !/^[a-z0-9]([a-z0-9-]*[a-z0-9])?$/i.test(value)) {\r\n                            return 'Please enter a valid GitHub username or leave empty';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                // Keywords\r\n                const keywordsInput = await input({\r\n                    message: 'keywords (comma-separated):',\r\n                    default: '',\r\n                });\r\n\r\n                const keywords = keywordsInput\r\n                    ? keywordsInput.split(',').map(k => k.trim()).filter(k => k)\r\n                    : [];\r\n\r\n                // License\r\n                const license = await input({\r\n                    message: 'license:',\r\n                    default: 'MIT'\r\n                });\r\n\r\n                return {\r\n                    name,\r\n                    type: type as 'lib' | 'cli' | 'server',\r\n                    template,\r\n                    description,\r\n                    packageManager: packageManager as 'bun' | 'npm',\r\n                    author,\r\n                    authorEmail,\r\n                    githubId,\r\n                    keywords,\r\n                    license\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for publish confirmation and options\r\n             */\r\n            static async promptPublish(spaceName: string): Promise<PublishPromptAnswers> {\r\n                const shouldPublish = await confirm({\r\n                    message: `Are you sure you want to publish \"${spaceName}\" to npm?`,\r\n                    default: false\r\n                });\r\n\r\n                if (!shouldPublish) {\r\n                    return {\r\n                        confirm: false\r\n                    };\r\n                }\r\n\r\n                const tag = await input({\r\n                    message: 'Publish with a tag (e.g., beta, next) or leave empty for latest:',\r\n                    default: ''\r\n                });\r\n\r\n                const access = await select({\r\n                    message: ' Access level:',\r\n                    choices: [\r\n                        { name: 'Public - Anyone can install', value: 'public' },\r\n                        { name: 'Restricted - Requires authentication', value: 'restricted' }\r\n                    ],\r\n                    default: 'public'\r\n                });\r\n\r\n                return {\r\n                    confirm: true,\r\n                    tag: tag || undefined,\r\n                    access: access as 'public' | 'restricted'\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for package removal confirmation\r\n             */\r\n            static async promptRemove(packages: string[]): Promise<RemovePromptAnswers> {\r\n                const shouldRemove = await confirm({\r\n                    message: `Remove ${packages.join(', ')}?`,\r\n                    default: true\r\n                });\r\n\r\n                return {\r\n                    packages,\r\n                    confirm: shouldRemove\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Simple confirmation prompt helper\r\n             */\r\n            static async promptConfirm(message: string, defaultValue: boolean = false): Promise<boolean> {\r\n                const readline = await import('readline');\r\n                const rl = readline.createInterface({\r\n                    input   : process.stdin,\r\n                    output  : process.stdout\r\n                });\r\n\r\n                const defaultText = defaultValue ? ' (Y/n)' : ' (y/N)';\r\n\r\n                return new Promise((resolve) => {\r\n                    rl.question(`${message}${defaultText} `, (answer: string) => {\r\n                        rl.close();\r\n\r\n                        if (answer.trim() === '') {\r\n                            resolve(defaultValue);\r\n                        } else {\r\n                            resolve(answer.trim().toLowerCase() === 'y' || answer.trim().toLowerCase() === 'yes');\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Prompt for package installation\r\n             */\r\n            static async promptInstall(currentPackages?: string): Promise<{\r\n                packages: string[];\r\n                isDev: boolean;\r\n            }> {\r\n                const packagesInput = await input({\r\n                    message: 'Enter package names (space-separated):',\r\n                    default: currentPackages || '',\r\n                    validate: (value: string) => {\r\n                        if (!value || value.trim() === '') {\r\n                            return 'Please enter at least one package name';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                const isDev = await confirm({\r\n                    message: '  Install as dev dependency?',\r\n                    default: false\r\n                });\r\n\r\n                return {\r\n                    packages: packagesInput.split(' ').filter((p: string) => p.trim()),\r\n                    isDev\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for package update selection\r\n             */\r\n            static async promptUpdate(): Promise<{ updateAll: boolean; packages?: string[] }> {\r\n                const updateType = await select({\r\n                    message: 'What do you want to update?',\r\n                    choices: [\r\n                        { name: 'All packages', value: 'all' },\r\n                        { name: 'Specific packages', value: 'specific' }\r\n                    ]\r\n                });\r\n\r\n                if (updateType === 'all') {\r\n                    return {\r\n                        updateAll: true\r\n                    };\r\n                }\r\n\r\n                const packagesInput = await input({\r\n                    message: ' Enter package names (space-separated):',\r\n                    validate: (value: string) => {\r\n                        if (!value || value.trim() === '') {\r\n                            return 'Please enter at least one package name';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                return {\r\n                    updateAll: false,\r\n                    packages: packagesInput.split(' ').filter((p: string) => p.trim())\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt user if they want to use current directory\r\n             */\r\n            static async promptUseCurrentDir(dirName: string): Promise<boolean> {\r\n                const shouldUse = await confirm({\r\n                    message: `Use current directory \"${dirName}\" as the space root?`,\r\n                    default: true\r\n                });\r\n\r\n                return shouldUse;\r\n            }\r\n\r\n            /**\r\n             * Prompt user if they want to delete existing directory\r\n             */\r\n            static async promptDeleteExistingDir(dirPath: string): Promise<boolean> {\r\n                const shouldDelete = await confirm({\r\n                    message: `  Directory already exists at \"${dirPath}\". Delete and recreate?`,\r\n                    default: false\r\n                });\r\n\r\n                return shouldDelete;\r\n            }\r\n\r\n            /**\r\n             * Show a success message with next steps\r\n             */\r\n            static showSuccess(spaceName: string, nextSteps: string[]) {\r\n                console.log('');\r\n                nextSteps.forEach((step, index) => {\r\n                    console.log(` ${step}`);\r\n                });\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show an error message\r\n             */\r\n            static showError(message: string, error?: Error) {\r\n                console.log('\\n Error:', message);\r\n                if (error && error.message) {\r\n                    console.log(`   ${error.message}`);\r\n                }\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show a warning message\r\n             */\r\n            static showWarning(message: string) {\r\n                console.log('\\n  Warning:', message);\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show an info message\r\n             */\r\n            static showInfo(message: string) {\r\n                console.log('\\n  ', message);\r\n                console.log('');\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/index.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { cli }                          from '@je-es/cli';\r\n    import { AppConfig, InitCommandParams } from \"../types.d\";\r\n    import { SpaceManager }                 from './mod/spaceManager';\r\n    import { PackageManagerWrapper }        from './mod/packageManager';\r\n    import { PromptHelper }                 from './mod/promptHelper';\r\n    import { spawnSync }                    from 'child_process';\r\n    import * as path                        from 'path';\r\n    import * as fs                          from 'fs';\r\n\r\n// \r\n\r\n\r\n\r\n//  LOADER \r\n\r\n    class Loader {\r\n\r\n        //  INIT \r\n\r\n            private frames: string[] = ['', '', '', '', '', '', '', '', '', ''];\r\n            private currentFrame: number = 0;\r\n            private interval: NodeJS.Timeout | null = null;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            start(message: string): void {\r\n                process.stdout.write(`\\n${message}`);\r\n                this.interval = setInterval(() => {\r\n                    process.stdout.write(`\\r${this.frames[this.currentFrame]} ${message}`);\r\n                    this.currentFrame = (this.currentFrame + 1) % this.frames.length;\r\n                }, 80);\r\n            }\r\n\r\n            stop(successMessage: string): void {\r\n                if (this.interval) {\r\n                    clearInterval(this.interval);\r\n                    this.interval = null;\r\n                }\r\n\r\n                if (successMessage === '') {\r\n                    // Clear the current line and move cursor up to remove the loader completely\r\n                    process.stdout.write('\\r\\x1b[K\\x1b[1A\\x1b[K');\r\n                } else {\r\n                    process.stdout.write(`\\r${successMessage}                          \\n\\n`);\r\n                }\r\n            }\r\n\r\n            stopWithError(errorMessage: string): void {\r\n                if (this.interval) {\r\n                    clearInterval(this.interval);\r\n                    this.interval = null;\r\n                }\r\n                process.stdout.write(`\\r ${errorMessage}                          \\n\\n`);\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class App {\r\n\r\n        //  INIT \r\n\r\n            private spaceManager    : SpaceManager;\r\n            private pm              : PackageManagerWrapper | null = null;\r\n\r\n            constructor(\r\n                public config       : AppConfig\r\n            ) {\r\n                this.spaceManager   = new SpaceManager();\r\n                this.initPackageManager();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            static create(config: AppConfig): App {\r\n                return new App(config);\r\n            }\r\n\r\n            run() {\r\n                // CLI Setup\r\n                cli(this.config.name, this.config.version).description(this.config.desc)\r\n\r\n                //  SPACE COMMANDS \r\n\r\n                // 'init' command - create new spaces\r\n                .command({\r\n                    name            : 'init',\r\n                    description     : 'Create a new space (lib or cli)',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'name',\r\n                            required    : false,\r\n                            default     : 'my-space',\r\n                            description : 'Name of the space (supports @org/name format)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'type',\r\n                            flag        : '--type',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Type of space (lib or cli)'\r\n                        },\r\n                        {\r\n                            name        : 'description',\r\n                            flag        : '--desc',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Description of the space'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: InitCommandParams) => this.createNewSpaceOnGroundViaCLI(params)\r\n                })\r\n\r\n                // 'info' command - show space information\r\n                .command({\r\n                    name            : 'info',\r\n                    description     : 'Show current space information',\r\n                    action          : () => this.showSpaceInfo()\r\n                })\r\n\r\n                //  PACKAGE MANAGER COMMANDS \r\n\r\n                // 'install' or 'i' command - install packages\r\n                .command({\r\n                    name            : 'install',\r\n                    aliases         : ['i'],\r\n                    description     : 'Install packages',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : false,\r\n                            description : 'Packages to install (space-separated)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'dev',\r\n                            flag        : '--dev',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Install as dev dependency'\r\n                        },\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Install globally'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: any) => this.installPackages(params)\r\n                })\r\n\r\n                // 'remove' or 'r' command - remove packages\r\n                .command({\r\n                    name            : 'remove',\r\n                    aliases         : ['r'],\r\n                    description     : 'Remove packages',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : true,\r\n                            description : 'Packages to remove (space-separated)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Remove globally'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: any) => this.removePackages(params)\r\n                })\r\n\r\n                // 'update' or 'up' command - update packages\r\n                .command({\r\n                    name            : 'update',\r\n                    aliases         : ['up'],\r\n                    description     : 'Update packages',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : false,\r\n                            description : 'Packages to update (space-separated, or all if empty)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: any) => this.updatePackages(params)\r\n                })\r\n\r\n                // 'link' command - link package globally OR link global package to project\r\n                .command({\r\n                    name            : 'link',\r\n                    description     : 'Link package globally (no args) or link global package to project (with package name)',\r\n                    \r\n                    args: [\r\n                        {\r\n                            name        : 'package',\r\n                            required    : false,\r\n                            description : 'Package name to link from global (optional)'\r\n                        }\r\n                    ],\r\n                    \r\n                    action: (params: any) => this.linkPackage(params)\r\n                })\r\n\r\n                // 'unlink' command - unlink package globally OR unlink global package from project\r\n                .command({\r\n                    name            : 'unlink',\r\n                    description     : 'Unlink package globally (no args) or unlink global package from project (with package name)',\r\n                    \r\n                    args: [\r\n                        {\r\n                            name        : 'package',\r\n                            required    : false,\r\n                            description : 'Package name to unlink from global (optional)'\r\n                        }\r\n                    ],\r\n                    \r\n                    action: (params: any) => this.unlinkPackage(params)\r\n                })\r\n\r\n                // 'list' or 'ls' command - list installed packages\r\n                .command({\r\n                    name            : 'list',\r\n                    aliases         : ['ls'],\r\n                    description     : 'List installed packages',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'List global packages'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: any) => this.listPackages(params)\r\n                })\r\n\r\n                //  BUILD & TEST COMMANDS \r\n\r\n                // 'build' command - build the space\r\n                .command({\r\n                    name            : 'build',\r\n                    description     : 'Build the current space',\r\n                    action          : () => this.buildSpace()\r\n                })\r\n\r\n                // 'test' command - run tests\r\n                .command({\r\n                    name            : 'test',\r\n                    description     : 'Run tests for the current space',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'path',\r\n                            required    : false,\r\n                            description : 'Specific test file or folder (optional)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: any) => this.runTests(params)\r\n                })\r\n\r\n                // 'run' command - run any script from package.json\r\n                .command({\r\n                    name                : 'run',\r\n                    description         : 'Run any script from package.json',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'script',\r\n                            required    : true,\r\n                            description : 'Script name from package.json'\r\n                        }\r\n                    ],\r\n\r\n                    allowDynamicArgs    : true,    // Allow additional arguments\r\n                    allowDynamicOptions : true,    // Allow additional options\r\n\r\n                    action: (params: any) => this.runScript(params)\r\n                })\r\n\r\n                // 'clean' command - clean build artifacts\r\n                .command({\r\n                    name            : 'clean',\r\n                    description     : 'Clean build artifacts',\r\n                    action          : () => this.clean()\r\n                })\r\n\r\n                // 'start' command - start the main file\r\n                .command({\r\n                    name                : 'start',\r\n                    description         : 'Start the main file',\r\n                    allowDynamicArgs    : true,    // Allow any arguments to pass through\r\n                    allowDynamicOptions : true,    // Allow any options to pass through\r\n                    action              : (params: any) => this.startMain(params)\r\n                })\r\n\r\n                //  PUBLISH COMMAND \r\n\r\n                // 'publish' command - publish to npm\r\n                .command({\r\n                    name            : 'publish',\r\n                    description     : 'Publish space to npm registry',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'tag',\r\n                            flag        : '--tag',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Publish with tag (e.g., beta, next)'\r\n                        },\r\n                        {\r\n                            name        : 'access',\r\n                            flag        : '--access',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Access level (public or restricted)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: any) => this.publish(params)\r\n                })\r\n\r\n                // Build and run CLI\r\n                .build().run();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            static defaultConfig(): AppConfig {\r\n                return {\r\n                    name    : 'Space',\r\n                    version : '0.0.1',\r\n                    desc    : 'Build flexible spaces for any platform',\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Initialize package manager based on space config\r\n             */\r\n            private initPackageManager() {\r\n                if (this.spaceManager.isSpace()) {\r\n                    // Always use bun - no need to check config\r\n                    this.pm = new PackageManagerWrapper();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Ensure we're in a space directory\r\n             */\r\n            private ensureSpace(): boolean {\r\n                if (!this.spaceManager.isSpace()) {\r\n                    console.error(' Not a space directory. Run \"space init <name> --type lib|cli\" first.');\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n\r\n            /**\r\n             * Parse package name to extract org and name\r\n             * Examples:\r\n             *   \"@je-es/ast\" -> { org: \"je-es\", name: \"ast\" }\r\n             *   \"my-package\" -> { org: \"\", name: \"my-package\" }\r\n             */\r\n            private parsePackageName(fullName: string): { org: string; name: string } {\r\n                const orgRegex = /^@([a-z0-9-_]+)\\/([a-z0-9-_]+)$/i;\r\n                const match = fullName.match(orgRegex);\r\n\r\n                if (match) {\r\n                    return {\r\n                        org: match[1],\r\n                        name: match[2]\r\n                    };\r\n                }\r\n\r\n                return {\r\n                    org: '',\r\n                    name: fullName\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Delete directory with retry logic for Windows file locking issues\r\n             */\r\n            private async deleteDirectoryWithRetry(dirPath: string, maxRetries: number = 3): Promise<void> {\r\n                for (let i = 0; i < maxRetries; i++) {\r\n                    try {\r\n                        // Try to delete\r\n                        fs.rmSync(dirPath, { recursive: true, force: true, maxRetries: 3, retryDelay: 100 });\r\n\r\n                        // Verify deletion\r\n                        if (!fs.existsSync(dirPath)) {\r\n                            return; // Success!\r\n                        }\r\n                    } catch (error: any) {\r\n                        if (i === maxRetries - 1) {\r\n                            // Last attempt failed\r\n                            throw error;\r\n                        }\r\n\r\n                        // Wait before retry (increasing delay)\r\n                        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1)));\r\n                    }\r\n                }\r\n\r\n                throw new Error('Failed to delete directory after multiple attempts');\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  SPACE \r\n\r\n            /**\r\n             * Create a new space via CLI\r\n             */\r\n            private async createNewSpaceOnGroundViaCLI(params: InitCommandParams) {\r\n                try {\r\n                    // Prompt for missing parameters\r\n                    const answers = await PromptHelper.promptInit({\r\n                        type            : params.options.type,\r\n                        template        : params.options.template,\r\n\r\n                        org             : '',\r\n                        name            : params.args.name,\r\n                        desc            : params.options.desc,\r\n                    });\r\n\r\n                    // Parse package name to extract org and actual name\r\n                    const { org, name } = this.parsePackageName(answers.name);\r\n\r\n                    // Validate type\r\n                    if (!['lib', 'cli', 'server'].includes(answers.type)) {\r\n                        PromptHelper.showError('Invalid space type. Must be lib, cli or server.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Validate template\r\n                    const { TemplateRegistry } = await import('./mod/templateRegistry');\r\n                    if (!TemplateRegistry.isValidTemplate(answers.type as any, answers.template as any)) {\r\n                        PromptHelper.showError('Invalid template for this space type.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Check if template is ready\r\n                    if (!TemplateRegistry.isTemplateReady(answers.type as any, answers.template as any)) {\r\n                        PromptHelper.showError('This template is not ready yet. Please choose another template.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Determine the target space path\r\n                    let spacePath: string | undefined;\r\n\r\n                    // Get current directory name\r\n                    const currentDirName = path.basename(process.cwd());\r\n\r\n                    // Check if name is empty and ask if user wants to use current directory\r\n                    if (!name || name.trim() === '') {\r\n                        const useCurrentDir = await PromptHelper.promptUseCurrentDir(currentDirName);\r\n\r\n                        if (useCurrentDir) {\r\n                            spacePath = process.cwd();\r\n                        } else {\r\n                            PromptHelper.showError('Space name is required when not using current directory');\r\n                            process.exit(1);\r\n                        }\r\n                    }\r\n                    // Check if folder name matches project name\r\n                    else if (currentDirName === name) {\r\n                        const useCurrentDir = await PromptHelper.promptUseCurrentDir(name);\r\n\r\n                        if (useCurrentDir) {\r\n                            spacePath = process.cwd();\r\n                        }\r\n                    }\r\n\r\n                    // If spacePath not set, use default (create subdirectory)\r\n                    if (!spacePath) {\r\n                        spacePath = path.join(process.cwd(), name);\r\n                    }\r\n\r\n                    // Check if space path already exists\r\n                    if (fs.existsSync(spacePath)) {\r\n                        const isDir = fs.statSync(spacePath).isDirectory();\r\n                        if (!isDir) {\r\n                            PromptHelper.showError(`Path \"${spacePath}\" exists but is not a directory`);\r\n                            process.exit(1);\r\n                        }\r\n\r\n                        // Directory exists, ask user what to do\r\n                        const shouldDelete = await PromptHelper.promptDeleteExistingDir(spacePath);\r\n\r\n                        if (!shouldDelete) {\r\n                            PromptHelper.showInfo('Space creation cancelled');\r\n                            process.exit(0);\r\n                        }\r\n\r\n                        // Delete the directory with retry logic\r\n                        try {\r\n                            await this.deleteDirectoryWithRetry(spacePath);\r\n                        } catch (error: any) {\r\n                            const isLockError = error.message &&\r\n                                (error.message.includes('EBUSY') ||\r\n                                error.message.includes('EPERM') ||\r\n                                error.message.includes('resource busy'));\r\n\r\n                            if (isLockError) {\r\n                                PromptHelper.showError(\r\n                                    `Cannot delete directory - it's being used by another program.\\n\\n` +\r\n                                    `Please try:\\n` +\r\n                                    `  1. Close any terminals/editors with \"${spacePath}\" open\\n` +\r\n                                    `  2. Navigate out of the directory in all terminals\\n` +\r\n                                    `  3. Run PowerShell/Terminal as Administrator\\n` +\r\n                                    `  4. Wait a few seconds and try again`\r\n                                );\r\n                            } else {\r\n                                PromptHelper.showError(\r\n                                    `Failed to delete existing directory.`,\r\n                                    error\r\n                                );\r\n                            }\r\n                            process.exit(1);\r\n                        }\r\n                    }\r\n\r\n                    // Show info about org detection\r\n                    if (org) {\r\n                        console.log(` Detected organization: @${org}`);\r\n                        console.log(` Package name: ${name}`);\r\n                    }\r\n\r\n                    // Show template info\r\n                    const templateInfo = TemplateRegistry.getTemplate(answers.type as any, answers.template as any);\r\n                    if (templateInfo?.deps) {\r\n                        console.log(` Includes: ${templateInfo.deps.join(', ')}`);\r\n                    }\r\n\r\n                    await this.spaceManager.createSpace({\r\n                        type            : answers.type as any,\r\n                        template        : answers.template as any,\r\n                        pm              : 'bun', // Always use bun\r\n\r\n                        repo           : {\r\n                            org        : org,\r\n                            name       : name,\r\n                            version    : '0.0.1',\r\n                            desc       : answers.description,\r\n                            kw         : answers.keywords.length > 0 ? answers.keywords : [],\r\n                            license    : answers.license || 'MIT',\r\n                        },\r\n\r\n                        author          : {\r\n                            id          : answers.githubId,\r\n                            name        : answers.author,\r\n                            email       : answers.authorEmail,\r\n                            url         : '', // Will be generated in spaceManager\r\n                        },\r\n\r\n                        createdAt       : new Date().toISOString()\r\n                    }, spacePath);\r\n\r\n                    PromptHelper.showSuccess(name, [\r\n                        spacePath === process.cwd() ? 'space install' :\r\n                        `cd ${name}`,\r\n                        `space install`,\r\n                        'space build'\r\n                    ]);\r\n                } catch (error) {\r\n                    PromptHelper.showError('Failed to create space', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Show information about current space\r\n             * Safely handles template placeholders and unexpected data types\r\n             */\r\n            private showSpaceInfo() {\r\n                if (!this.ensureSpace()) return;\r\n\r\n                const config = this.spaceManager.loadSpaceConfig();\r\n                if (!config) {\r\n                    console.error(' Could not load space configuration.');\r\n                    return;\r\n                }\r\n\r\n                console.log('');\r\n\r\n                // Safe access to org - check if it exists and is not empty\r\n                const hasOrg = config.repo?.org && config.repo.org.trim() !== '';\r\n                const fullName = hasOrg\r\n                    ? `${config.repo.org}/${config.repo.name}`\r\n                    : config.repo.name;\r\n\r\n                console.log(`Name:            ${fullName}`);\r\n                console.log(`Type:            ${config.type}`);\r\n                console.log(`Version:         ${config.repo.version}`);\r\n\r\n                // Safe description handling\r\n                if (config.repo.desc && config.repo.desc !== '{{desc}}' && config.repo.desc !== '{{description}}') {\r\n                    console.log(`Description:     ${config.repo.desc}`);\r\n                }\r\n\r\n                // Safe keywords handling - check if it's an array and not empty\r\n                if (config.repo.kw) {\r\n                    // Normalize to array if it's a string\r\n                    let keywords: string[] = [];\r\n\r\n                    if (Array.isArray(config.repo.kw)) {\r\n                        keywords = config.repo.kw.filter((k: any) =>\r\n                            k &&\r\n                            typeof k === 'string' &&\r\n                            k.trim() !== '' &&\r\n                            k !== '{{kw}}' &&\r\n                            k !== '{{keywords}}'\r\n                        );\r\n                    } else if (typeof config.repo.kw === 'string') {\r\n                        const kwString = config.repo.kw as string;\r\n                        if (kwString !== '{{kw}}' &&\r\n                            kwString !== '{{keywords}}' &&\r\n                            kwString.trim() !== '') {\r\n                            // If it's a string, try to split by comma\r\n                            keywords = kwString\r\n                                .split(',')\r\n                                .map((k: string) => k.trim())\r\n                                .filter((k: string) => k !== '');\r\n                        }\r\n                    }\r\n\r\n                    if (keywords.length > 0) {\r\n                        console.log(`Keywords:        ${keywords.join(', ')}`);\r\n                    }\r\n                }\r\n\r\n                // Safe license handling\r\n                if (config.repo.license && config.repo.license !== '{{license}}') {\r\n                    console.log(`License:         ${config.repo.license}`);\r\n                }\r\n\r\n                console.log(`PackageManager:  bun`);\r\n\r\n                // Safe author name handling\r\n                if (config.author?.name &&\r\n                    config.author.name !== '{{author}}' &&\r\n                    config.author.name !== '{{author_name}}') {\r\n                    console.log(`Author:          ${config.author.name}`);\r\n                }\r\n\r\n                console.log(`Created:         ${new Date(config.createdAt).toLocaleDateString()}`);\r\n\r\n                console.log('');\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  PKG MGR \r\n\r\n            /**\r\n             * Install packages\r\n             */\r\n            private async installPackages(params: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    let packages = params.args.packages\r\n                        ? params.args.packages.split(' ').filter((p: string) => p.trim())\r\n                        : undefined;\r\n\r\n                    let isDev = params.options.dev || false;\r\n\r\n                    // If no packages provided, prompt\r\n                    if (!packages || packages.length === 0) {\r\n                        const shouldInstallAll = await PromptHelper.promptConfirm(\r\n                            'No packages specified. Install all dependencies from package.json?',\r\n                            true\r\n                        );\r\n\r\n                        if (!shouldInstallAll) {\r\n                            const installAnswers    = await PromptHelper.promptInstall();\r\n                            packages                = installAnswers.packages;\r\n                            isDev                   = installAnswers.isDev;\r\n                        }\r\n                    }\r\n\r\n                    this.pm!.install(packages, {\r\n                        dev: isDev,\r\n                        global: params.options.global\r\n                    });\r\n                } catch (error) {\r\n                    PromptHelper.showError(' Installation failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Remove packages\r\n             */\r\n            private async removePackages(params: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    const packages = params.args.packages.split(' ').filter((p: string) => p.trim());\r\n\r\n                    if (packages.length === 0) {\r\n                        PromptHelper.showError('Please specify packages to remove');\r\n                        return;\r\n                    }\r\n\r\n                    // Confirm removal\r\n                    const removeAnswers = await PromptHelper.promptRemove(packages);\r\n\r\n                    if (!removeAnswers.confirm) {\r\n                        PromptHelper.showInfo('Removal cancelled');\r\n                        return;\r\n                    }\r\n\r\n                    this.pm!.remove(packages, {\r\n                        global: params.options.global\r\n                    });\r\n                } catch (error) {\r\n                    PromptHelper.showError(' Removal failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Update packages\r\n             */\r\n            private async updatePackages(params: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    let packages = params.args.packages\r\n                        ? params.args.packages.split(' ').filter((p: string) => p.trim())\r\n                        : undefined;\r\n\r\n                    // If no packages specified, prompt\r\n                    if (!packages || packages.length === 0) {\r\n                        const updateAnswers = await PromptHelper.promptUpdate();\r\n                        packages            = updateAnswers.updateAll ? undefined : updateAnswers.packages;\r\n                    }\r\n\r\n                    this.pm!.update(packages);\r\n                } catch (error) {\r\n                    PromptHelper.showError(' Update failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Link package globally or link global package to project\r\n             */\r\n            private linkPackage(params?: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const packageName = params?.args?.package;\r\n                this.pm!.link(packageName);\r\n            }\r\n\r\n            /**\r\n             * Unlink package globally or unlink global package from project\r\n             */\r\n            private unlinkPackage(params?: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const packageName = params?.args?.package;\r\n                this.pm!.unlink(packageName);\r\n            }\r\n\r\n            /**\r\n             * List packages\r\n             */\r\n            private listPackages(params: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                this.pm!.list({\r\n                    global: params.options.global\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Run any script from package.json\r\n             */\r\n            private runScript(params: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const scriptName = params?.args?.script;\r\n\r\n                if (!scriptName) {\r\n                    PromptHelper.showError('Please specify a script name');\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    // Collect dynamic args and options\r\n                    let args: string[] = [];\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        args.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    if (params?.dynamicOptions && typeof params.dynamicOptions === 'object') {\r\n                        for (const [key, value] of Object.entries(params.dynamicOptions)) {\r\n                            args.push(`--${key}`);\r\n                            if (value !== true && value !== false) {\r\n                                args.push(String(value));\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // console.log(` Running script: ${scriptName}${args.length > 0 ? ' ' + args.join(' ') : ''}\\n`);\r\n                    this.pm!.run(scriptName, args.length > 0 ? args : undefined);\r\n                } catch (error) {\r\n                    PromptHelper.showError(`Failed to run script \"${scriptName}\"`, error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  BUILD \r\n\r\n            /**\r\n             * Build the current space\r\n             */\r\n            private buildSpace(silently?: boolean) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Building space...');\r\n\r\n                try {\r\n                    this.pm!.runSilent('build');\r\n                    loader.stop(silently ? '' : ' Build succeeded');\r\n                } catch (error) {\r\n                    loader.stopWithError(' Build failed');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            private buildSpaceBool(silently?: boolean) : boolean{\r\n                if (!this.ensureSpace()) return false;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Building space...');\r\n\r\n                try {\r\n                    this.pm!.runSilent('build');\r\n                    loader.stop(silently ? '' : ' Build succeeded');\r\n                    return true\r\n                } catch (error) {\r\n                    loader.stopWithError(' Build failed!');\r\n                    return false\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run tests\r\n             */\r\n            private runTests(params?: any) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const testPath = params?.args?.path || null;\r\n\r\n                if (testPath) {\r\n                    this.pm!.run('test', [testPath]);\r\n                } else {\r\n                    this.pm!.run('test');\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Clean build artifacts\r\n             */\r\n            private clean() {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Cleaning build artifacts...');\r\n\r\n                try {\r\n                    this.pm!.run('clean');\r\n                    loader.stop(' Clean complete!');\r\n                } catch (error) {\r\n                    loader.stopWithError(' Clean failed!');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Start the main file - builds silently first, then runs\r\n             */\r\n            private startMain(params?: any) {\r\n                if (!this.buildSpaceBool(true)) return;\r\n\r\n                try {\r\n                    // Step 1: Find the built main file\r\n                    const mainFile = this.findBuiltMainFile();\r\n\r\n                    if (!mainFile) {\r\n                        PromptHelper.showError(\r\n                            'Could not find built entry point.\\n' +\r\n                            'Expected to find dist/main.js or dist/index.js after build.'\r\n                        );\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Step 2: Collect ALL arguments (dynamic args from CLI)\r\n                    let args: string[] = [];\r\n\r\n                    // Get dynamic args (all unnamed args passed after 'start')\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        args.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    // Get dynamic options (all --flags passed)\r\n                    if (params?.dynamicOptions && typeof params.dynamicOptions === 'object') {\r\n                        for (const [key, value] of Object.entries(params.dynamicOptions)) {\r\n                            args.push(`--${key}`);\r\n                            if (value !== true && value !== false) {\r\n                                args.push(String(value));\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Step 3: Show what we're running\r\n                    if (args.length > 0) {\r\n                        // console.log(` Running: bun ${mainFile} ${args.join(' ')}\\n`);\r\n                    } else {\r\n                        // console.log(` Running: bun ${mainFile}\\n`);\r\n                    }\r\n\r\n                    // Step 4: Run the built file with bun\r\n                    const result = spawnSync('bun', [mainFile, ...args], {\r\n                        stdio: 'inherit',\r\n                        cwd: process.cwd()\r\n                    });\r\n\r\n                    if (result.error) {\r\n                        PromptHelper.showError('Failed to start process', result.error as Error);\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    if (result.status !== 0 && result.status !== null) {\r\n                        console.error('\\n Process exited with error');\r\n                        process.exit(result.status);\r\n                    }\r\n                } catch (error) {\r\n                    PromptHelper.showError('Failed to start', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Find the built main entry file (after build)\r\n             */\r\n            private findBuiltMainFile(): string | null {\r\n                const possiblePaths = [\r\n                    'dist/main.js',\r\n                    'dist/index.js',\r\n                    'dist/app.js'\r\n                ];\r\n\r\n                // Try built files first\r\n                for (const filePath of possiblePaths) {\r\n                    if (fs.existsSync(path.join(process.cwd(), filePath))) {\r\n                        return filePath;\r\n                    }\r\n                }\r\n\r\n                // Fallback: Check package.json main field\r\n                try {\r\n                    const packageJsonPath = path.join(process.cwd(), 'package.json');\r\n                    if (fs.existsSync(packageJsonPath)) {\r\n                        const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'));\r\n\r\n                        if (packageJson.main && fs.existsSync(packageJson.main)) {\r\n                            return packageJson.main;\r\n                        }\r\n                    }\r\n                } catch (error) {\r\n                    // Ignore package.json errors\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Publish to npm\r\n             */\r\n            private async publish(params: any) {\r\n                if(!this.buildSpaceBool(true)) return;\r\n                try {\r\n                    const config = this.spaceManager.loadSpaceConfig();\r\n                    if (!config) {\r\n                        PromptHelper.showError('Could not load space configuration');\r\n                        return;\r\n                    }\r\n\r\n                    const fullName = config.repo.org\r\n                        ? `@${config.repo.org}/${config.repo.name}`\r\n                        : config.repo.name;\r\n\r\n                    // Prompt for publish options if not provided\r\n                    let tag     = params.options.tag;\r\n                    let access  = params.options.access;\r\n\r\n                    if (!tag && !access) {\r\n                        const publishAnswers = await PromptHelper.promptPublish(fullName);\r\n\r\n                        if (!publishAnswers.confirm) {\r\n                            PromptHelper.showInfo('Publish cancelled');\r\n                            return;\r\n                        }\r\n\r\n                        tag     = publishAnswers.tag;\r\n                        access  = publishAnswers.access;\r\n                    }\r\n\r\n                    const loader = new Loader();\r\n                    loader.start('Publishing package...');\r\n\r\n                    this.pm!.publish({\r\n                        tag,\r\n                        access: access as any\r\n                    }, loader);\r\n                } catch (error) {\r\n                    PromptHelper.showError('Publish failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// main.ts\n//\n// repo   : https://github.com/space-lib/space\n// author : https://github.com/maysara-elshewehy\n//\n// Developed with  by Maysara.\n\n\n\n//  PACK \n\n    import { App } from './app';\n\n// \n\n\n\n//  INIT \n\n    const app = App.create({\n        name        : 'Space',\n        version     : '0.0.2',\n        desc        : 'Build flexible spaces for any platform',\n    });\n\n    app.run();\n\n// "]}